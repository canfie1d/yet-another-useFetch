import{useState,useEffect}from"react";export const useFetch=(t,e="GET",s=null,a=null,n=!0,o=null)=>{const[c,r]=useState(t),[i,l]=useState(s),[u,p]=useState(null),[h,d]=useState(null);return useEffect(()=>{c&&((async()=>{try{let t={method:e,credentials:"same-origin"};i&&(t.body=i),n&&(t.headers=o?{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${o}`}:{Accept:"application/json","Content-Type":"application/json"}),a&&(t.headers=Object.assign(t.headers,a));const s=await fetch(c,t);if(!1===s.ok)d({status:s.status,message:s.statusText});else{const t=await s.json();p(t)}}catch(t){d(t)}})(),r(t))},[c]),{noop:!c&&!u,loading:c&&!u,response:u,error:h,setFetchUrl:r,setFetchBody:l}};
